<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ููุตุฉ ูุชุงุจุนุฉ ูุคุดุฑุงุช ุงูุชูููู ูุงูุงุนุชูุงุฏ ุงููุฏุฑุณู</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Tajawal:wght@300;400;500;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="hero">
      <div>
        <p class="tag">ูุธุงู ุงุญุชุฑุงูู ูุชุชุจุน ุฌูุฏุฉ ุงููุฏุฑุณุฉ</p>
        <h1>ููุตุฉ ูุชุงุจุนุฉ ูุคุดุฑุงุช ุงูุงุนุชูุงุฏ ุงููุฏุฑุณู</h1>
        <p class="subtitle">
          3 ุทุจูุงุช ุฐููุฉ: ุงููุฌุงูุงุช โ ุงููุนุงููุฑ โ ุงููุคุดุฑุงุชุ ูุน ููุงุฆู ุชุญูู ุญุฏูุซุฉุ ุชูููู ููุฑู
          ููุณุชูู ุงูุชุญููุ ูููุญุฉ ูุคุดุฑุงุช ูุณุงุนุฏุฉ ูุงุชุฎุงุฐ ุงููุฑุงุฑ.
        </p>
      </div>
      <div class="hero-actions">
        <button class="hero-link-btn" id="openSchoolInfoBtn" type="button">&#9881; ุจูุงูุงุช ุงููุฏุฑุณุฉ ูุงููุฑูู</button>
        <a class="hero-link-btn" href="report.html">ูุชุญ ุงูุชูุฑูุฑ ุงููุณุชูู</a>
        <a class="hero-link-btn" href="progress-report.html">ุชูุฑูุฑ ุงูุชูุฏู ูุงูุฅูุฌุงุฒ (PDF)</a>
      </div>
    </header>

    <main class="layout">
      <section class="card dashboard" id="dashboard"></section>
      <section class="card backup-panel" id="backup-panel"></section>
      <section class="card breadcrumbs" id="breadcrumbs"></section>
      <section class="card" id="list-view"></section>
      <section class="card" id="detail-view" hidden></section>

      <section class="card info-grid">
        <article class="evaluation-rules" aria-label="ููุงุนุฏ ุงูุชูููู ุญุณุจ ุนุฏุฏ ุงูุฃุฏูุฉ">
          <header class="evaluation-rules-head">
            <h2>ููุงุนุฏ ุงูุชูููู ุญุณุจ ุนุฏุฏ ุงูุฃุฏูุฉ ุงููุชููุฑุฉ</h2>
            <p>ุฅุทุงุฑ ููุญุฏ ูููุงุณ ูุณุชูู ุชุญูู ุงููุคุดุฑ ููู ุนุฏุฏ ุงูุดูุงูุฏ ูุงููุซุงุฆู.</p>
          </header>

          <ul class="levels levels-enhanced">
            <li class="level-item">
              <span class="level-badge">
                <span class="dot low"></span>
                <strong>ููุฎูุถุฉ</strong>
              </span>
              <span class="level-text">ูุชุญูู ุจุฏุฑุฌุฉ ููุฎูุถุฉ โ ุฅุฐุง ุชููุฑ ุฏูููุงู ุฃู ุฃูู.</span>
            </li>
            <li class="level-item">
              <span class="level-badge">
                <span class="dot med"></span>
                <strong>ูุชูุณุทุฉ</strong>
              </span>
              <span class="level-text">ูุชุญูู ุจุฏุฑุฌุฉ ูุชูุณุทุฉ โ ุฅุฐุง ุชููุฑ ูู 3 ุฅูู 4 ุฃุฏูุฉ.</span>
            </li>
            <li class="level-item">
              <span class="level-badge">
                <span class="dot high"></span>
                <strong>ูุฑุชูุนุฉ</strong>
              </span>
              <span class="level-text">ูุชุญูู ุจุฏุฑุฌุฉ ูุฑุชูุนุฉ โ ุฅุฐุง ุชููุฑ 5 ุฃุฏูุฉ.</span>
            </li>
            <li class="level-item">
              <span class="level-badge">
                <span class="dot vhigh"></span>
                <strong>ูุฑุชูุนุฉ ุฌุฏุงู</strong>
              </span>
              <span class="level-text">ูุชุญูู ุจุฏุฑุฌุฉ ูุฑุชูุนุฉ ุฌุฏุงู โ ุฅุฐุง ุชููุฑ 6 ุฃุฏูุฉ ูุฃูุซุฑ.</span>
            </li>
          </ul>
        </article>
      </section>
    </main>

    <!-- ===== ูุงูุฐุฉ ุจูุงูุงุช ุงููุฏุฑุณุฉ ูุงููุฑูู ===== -->
    <div class="si-overlay" id="siOverlay">
      <div class="si-box">
        <div class="si-header">
          <h3 class="si-title">ุจูุงูุงุช ุงููุฏุฑุณุฉ ูุงููุฑูู</h3>
          <button class="si-close" id="siCloseBtn" type="button">&times;</button>
        </div>
        <div class="si-body">
          <div class="si-group">
            <label class="si-label" for="siSchoolName">ุงุณู ุงููุฏุฑุณุฉ</label>
            <input class="si-input" id="siSchoolName" type="text" placeholder="ูุซุงู: ุงูุงุจุชุฏุงุฆูุฉ ุงูุฎุงูุณุฉ" />
          </div>
          <div class="si-group">
            <label class="si-label" for="siRegion">ุงูุฅุฏุงุฑุฉ ุงูุชุนููููุฉ / ุงูููุทูุฉ</label>
            <input class="si-input" id="siRegion" type="text" placeholder="ูุซุงู: ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ ููุชุนููู ุจุงูููุทูุฉ ุงูุดุฑููุฉ" />
          </div>
          <div class="si-group">
            <label class="si-label" for="siPrincipal">ุงุณู ูุงุฆุฏ/ุฉ ุงููุฏุฑุณุฉ</label>
            <input class="si-input" id="siPrincipal" type="text" placeholder="ุงูุงุณู ุงููุงูู" />
          </div>
          <div class="si-group">
            <label class="si-label" for="siSupervisor">ุงุณู ูุดุฑู/ุฉ ุงูุชููุฒ (ููุณู ุงูุฌูุฏุฉ)</label>
            <input class="si-input" id="siSupervisor" type="text" placeholder="ุงูุงุณู ุงููุงูู" />
          </div>
          <div class="si-group">
            <label class="si-label" for="siTeam">ุฃุนุถุงุก ูุฑูู ุงูุชููุฒ <span class="si-hint">(ุนุถู ูู ูู ุณุทุฑ)</span></label>
            <textarea class="si-textarea" id="siTeam" rows="5" placeholder="ุฃุฏุฎู ุงุณู ูู ุนุถู ูู ุณุทุฑ ูุณุชูู"></textarea>
          </div>
        </div>
        <div class="si-footer">
          <button class="si-btn si-btn-cancel" id="siCancelBtn" type="button">ุฅูุบุงุก</button>
          <button class="si-btn si-btn-save" id="siSaveBtn" type="button">ุญูุธ ุงูุจูุงูุงุช</button>
        </div>
        <div class="si-status" id="siStatus"></div>
      </div>
    </div>

    <!-- ===== ูุงูุฐุฉ ุชุญุฐูุฑ ูุณุญ ุงูุจูุงูุงุช ===== -->
    <div class="cd-overlay" id="cdOverlay" role="dialog" aria-modal="true" aria-labelledby="cdTitle">
      <div class="cd-box">
        <div class="cd-icon" aria-hidden="true">โ๏ธ</div>
        <h3 class="cd-title" id="cdTitle">ุชุญุฐูุฑ: ูุณุญ ุฌููุน ุงูุจูุงูุงุช</h3>
        <p class="cd-message">
          ุงูููุงููุฉ ุนูู ูุฐุง ุงูุฅุฌุฑุงุก ุณุชุคุฏู ุฅูู <strong>ุญุฐู ุฌููุน ุจูุงูุงุช ุงููุคุดุฑุงุช ูุงูุฅุฏุฎุงูุงุช</strong> ุจุดูู ููุงุฆู ููุง ูููู ุงูุชุฑุงุฌุน ุนูู.
          <br /><br />
          ูููุตุญ ุจุดุฏุฉ <strong>ุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</strong> ูุจู ุงููุชุงุจุนุฉ ููุญูุงุธ ุนูู ุจูุงูุงุชู.
        </p>
        <div class="cd-footer">
          <button class="cd-btn cd-btn-backup" id="cdBackupBtn" type="button">๐พ ุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</button>
          <button class="cd-btn cd-btn-cancel" id="cdCancelBtn" type="button">ูุงุ ุฅูุบุงุก ุงูุฃูุฑ</button>
          <button class="cd-btn cd-btn-confirm" id="cdConfirmBtn" type="button">ูุนูุ ูุชุฃูุฏ ูู ุญุฐู ุงูุจูุงูุงุช</button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
    <script>
    // โโโ ูุงูุฐุฉ ุจูุงูุงุช ุงููุฏุฑุณุฉ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    (function() {
      var SKEY = "school-info";
      var RKEY = "accreditation-checklist-v3";
      var overlay = document.getElementById("siOverlay");
      var openBtn = document.getElementById("openSchoolInfoBtn");
      var closeBtn = document.getElementById("siCloseBtn");
      var cancelBtn = document.getElementById("siCancelBtn");
      var saveBtn = document.getElementById("siSaveBtn");
      var statusEl = document.getElementById("siStatus");

      var inpSchool = document.getElementById("siSchoolName");
      var inpRegion = document.getElementById("siRegion");
      var inpPrincipal = document.getElementById("siPrincipal");
      var inpSupervisor = document.getElementById("siSupervisor");
      var inpTeam = document.getElementById("siTeam");

      function openModal() {
        var info = {};
        try { info = JSON.parse(localStorage.getItem(SKEY) || "{}"); } catch(e) {}
        inpSchool.value = info.schoolName || "";
        inpRegion.value = info.regionName || "";
        inpPrincipal.value = info.principalName || "";
        inpSupervisor.value = info.supervisorName || "";
        inpTeam.value = Array.isArray(info.teamMembers) ? info.teamMembers.join("\n") : "";
        statusEl.textContent = "";
        overlay.classList.add("si-active");
        inpSchool.focus();
      }

      function closeModal() {
        overlay.classList.remove("si-active");
      }

      function saveData() {
        var members = inpTeam.value.split("\n").map(function(l) { return l.trim(); }).filter(function(l) { return l.length > 0; });
        var data = {
          schoolName: inpSchool.value.trim(),
          regionName: inpRegion.value.trim(),
          principalName: inpPrincipal.value.trim(),
          supervisorName: inpSupervisor.value.trim(),
          teamMembers: members
        };
        localStorage.setItem(SKEY, JSON.stringify(data));

        // ุชุญุฏูุซ ุจูุงูุงุช ุงูุชูุฑูุฑ ุงููุฏูู ููุชูุงูู
        var rStore = {};
        try { rStore = JSON.parse(localStorage.getItem(RKEY) || "{}"); } catch(e) {}
        if (data.schoolName) rStore.schoolName = data.schoolName;
        if (data.regionName) rStore.regionName = data.regionName;
        localStorage.setItem(RKEY, JSON.stringify(rStore));

        statusEl.textContent = "ุชู ุญูุธ ุงูุจูุงูุงุช ุจูุฌุงุญ. ุณุชุธูุฑ ูู ุชูุฑูุฑ ุงูุชูุฏู ูุงูุฅูุฌุงุฒ ุนูุฏ ุงูุทุจุงุนุฉ.";
        setTimeout(closeModal, 1500);
      }

      openBtn.addEventListener("click", openModal);
      closeBtn.addEventListener("click", closeModal);
      cancelBtn.addEventListener("click", closeModal);
      saveBtn.addEventListener("click", saveData);
      overlay.addEventListener("click", function(e) { if (e.target === overlay) closeModal(); });
      document.addEventListener("keydown", function(e) { if (e.key === "Escape" && overlay.classList.contains("si-active")) closeModal(); });
    })();

    // โโโ ูุงูุฐุฉ ุชุฃููุฏ ูุณุญ ุงูุจูุงูุงุช โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    (function() {
      var cdOverlay = document.getElementById("cdOverlay");
      var cdCancelBtn = document.getElementById("cdCancelBtn");
      var cdConfirmBtn = document.getElementById("cdConfirmBtn");
      var cdBackupBtn = document.getElementById("cdBackupBtn");

      cdCancelBtn.addEventListener("click", function() {
        closeClearDataModal();
      });

      cdConfirmBtn.addEventListener("click", function() {
        clearAllData();
      });

      cdBackupBtn.addEventListener("click", function() {
        downloadBackupFile();
      });

      cdOverlay.addEventListener("click", function(e) {
        if (e.target === cdOverlay) closeClearDataModal();
      });

      document.addEventListener("keydown", function(e) {
        if (e.key === "Escape" && cdOverlay.classList.contains("cd-active")) closeClearDataModal();
      });
    })();
    </script>
  </body>
</html>
